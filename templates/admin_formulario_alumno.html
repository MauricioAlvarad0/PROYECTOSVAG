{% extends "base.html" %}
{% block title %}{{ titulo }}{% endblock %}

{% block content %}
<h2>{{ titulo }}</h2>

<form method="post" action="{{ accion }}">
    <div>
        <label for="nombre">Nombre Completo:</label><br>
        <input type="text" id="nombre" name="nombre" value="{{ alumno.nombre if alumno else '' }}" required>
    </div>
    <div>
        <label for="matricula">Matrícula (para login):</label><br>
        <input type="text" id="matricula" name="matricula" value="{{ alumno.matricula if alumno else '' }}" required>
    </div>
    <div>
        <label for="password">Contraseña:</label><br>
        <input type="password" id="password" name="password" {% if not alumno.id %}required{% endif %}>
        {% if alumno.id %}<small class="form-text text-muted">Dejar en blanco para no cambiar la contraseña actual.</small>{% endif %}
    </div>
    <div>
        <label for="maestro_id">Maestro Asignado (Opcional):</label><br>
        <select id="maestro_id" name="maestro_id">
            <option value="">-- Ninguno --</option>
            {% for maestro_item in maestros %}
                <option value="{{ maestro_item.id }}" {% if alumno.maestro_id == maestro_item.id %}selected{% endif %}>
                    {{ maestro_item.nombre }} (ID: {{ maestro_item.id }})
                </option>
            {% endfor %}
        </select>
    </div>
    {# El rol del alumno es fijo 'alumno', no se selecciona en el formulario #}
    <br>
    <input type="submit" value="{{ 'Actualizar' if alumno.id else 'Agregar' }} Alumno" class="btn">
</form>

<p style="margin-top: 20px;"><a href="{{ url_for('admin_gestionar_alumnos') }}">Volver a la lista de alumnos</a></p>
{% endblock %}